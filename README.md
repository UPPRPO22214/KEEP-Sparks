# KEEP Искры

**Авторы проекта:**  
- Козолий Михаил  
- Власенко Иван  

---

## Оглавление

- [KEEP Искры](#keep-искры)
  - [Оглавление](#оглавление)
  - [О проекте](#о-проекте)
    - [Миссия](#миссия)
    - [Ценностное предложение](#ценностное-предложение)
  - [Зачем это нужно?](#зачем-это-нужно)
    - [Проблемы, которые решает система:](#проблемы-которые-решает-система)
      - [Для участников мероприятий:](#для-участников-мероприятий)
      - [Для организаторов:](#для-организаторов)
    - [Уникальные преимущества:](#уникальные-преимущества)
  - [Архитектура системы](#архитектура-системы)
    - [Технологический стек](#технологический-стек)
      - [Backend](#backend)
      - [Frontend](#frontend)
      - [Интеграции](#интеграции)
    - [Архитектурные принципы](#архитектурные-принципы)
  - [Функциональные требования](#функциональные-требования)
    - [1. Система аутентификации и авторизации](#1-система-аутентификации-и-авторизации)
    - [2. Управление пользователями (CRUD API + Prisma ORM)](#2-управление-пользователями-crud-api--prisma-orm)
    - [3. Управление сменами](#3-управление-сменами)
    - [4. Управление мероприятиями (настраиваемая балльная система)](#4-управление-мероприятиями-настраиваемая-балльная-система)
    - [5. Система баллов и рейтинга](#5-система-баллов-и-рейтинга)
    - [6. Интеграция с Google Sheets](#6-интеграция-с-google-sheets)
    - [7. Telegram Mini App интерфейс](#7-telegram-mini-app-интерфейс)
  - [Нефункциональные требования](#нефункциональные-требования)
    - [1. Производительность](#1-производительность)
    - [2. Масштабируемость](#2-масштабируемость)
    - [3. Надежность](#3-надежность)
    - [4. Безопасность](#4-безопасность)
    - [5. Удобство использования](#5-удобство-использования)
    - [6. Поддерживаемость](#6-поддерживаемость)
  - [Пользовательские роли](#пользовательские-роли)
    - [Участник мероприятий (USER)](#участник-мероприятий-user)
    - [Организатор мероприятий (ADMIN)](#организатор-мероприятий-admin)
  - [План разработки](#план-разработки)
    - [Этап 1: Подготовка и настройка (1 неделя)](#этап-1-подготовка-и-настройка-1-неделя)
    - [Этап 2: Backend разработка (3 недели)](#этап-2-backend-разработка-3-недели)
    - [Этап 3: Frontend разработка (3 недели)](#этап-3-frontend-разработка-3-недели)
    - [Этап 4: Интеграции (2 недели)](#этап-4-интеграции-2-недели)
    - [Этап 5: Тестирование и оптимизация (2 недели)](#этап-5-тестирование-и-оптимизация-2-недели)
    - [Этап 6: Развертывание (1 неделя)](#этап-6-развертывание-1-неделя)


## О проекте

**KEEP Искры** — это цифровая экосистема для автоматизации сбора, анализа и отображения данных о достижениях участников мероприятий, которая превращает разрозненные данные в мотивирующую систему рейтинга и достижений.

### Миссия
Создать единую платформу, которая:
- **Для участников:** Предоставляет персонализированную статистику достижений и мотивирует к участию
- **Для организаторов:** Обеспечивает полный контроль над данными и аналитикой мероприятий  
- **Для системы:** Становится основой для развития игровых механик и рейтинговых систем

### Ценностное предложение
- **Удобство:** Доступ через привычный Telegram без необходимости установки дополнительных приложений
- **Автоматизация:** Синхронизация с Google Sheets для минимизации ручной работы
- **Мотивация:** Визуализация прогресса и достижений для участников
- **Контроль:** Полная настройка системы под специфику мероприятий

---

## Зачем это нужно?

### Проблемы, которые решает система:

#### Для участников мероприятий:
- **Отсутствие визуализации прогресса** → Персонализированная статистика достижений
- **Сложность отслеживания участия** → Единая система учета по всем сменам
- **Необходимость запоминать достижения** → Автоматическое ведение истории

#### Для организаторов:
- **Ручной подсчет баллов и рейтингов** → Автоматизация процессов учета
- **Сложность ведения учета по множеству смен** → Единая система управления
- **Необходимость работы с Excel таблицами** → Синхронизация с Google Sheets

### Уникальные преимущества:
- **Единственное решение в экосистеме Telegram** → Нативная интеграция с Telegram Mini App
- **Специализация на мероприятиях** → Фокус на специфических потребностях
- **Минимальная настройка** → Простота использования для организаторов

---

## Архитектура системы

### Технологический стек

#### Backend
- **Node.js** → Быстрая разработка, богатая экосистема
- **Express.js** → Легковесный веб-фреймворк
- **Prisma ORM** → Типобезопасность, автоматические миграции
- **PostgreSQL+** → Надежная реляционная база данных
- **TypeScript** → Статическая типизация, лучшая разработка

#### Frontend  
- **Telegram Mini App** → Нативная интеграция с Telegram
- **Tailwind CSS** → Быстрая стилизация, адаптивный дизайн
- **Vite** → Быстрая сборка и разработка
- **Zustand** → Простое управление состоянием
- **Axios** → HTTP клиент для API

#### Интеграции
- **Telegram Bot API** → Аутентификация, уведомления
- **Google Sheets API** → Синхронизация данных
- **Docker** → Контейнеризация, локальное развертывание

### Архитектурные принципы
- **Separation of Concerns** → Четкое разделение ответственности
- **Single Responsibility** → Каждый компонент имеет одну зону ответственности
- **API-First Design** → Все взаимодействия через REST API
- **Модульная архитектура** → Легкое расширение и масштабирование

---

## Функциональные требования

### 1. Система аутентификации и авторизации
**Реализация:** Telegram validation + JWT tokens
- **Ролевая модель USER/ADMIN** → Разграничение прав доступа
- **JWT сессии** → Управление пользовательскими сессиями

### 2. Управление пользователями (CRUD API + Prisma ORM)
- **Профили участников** → Хранение базовой информации в PostgreSQL
- **Список участников** → RESTful API для просмотра пользователей
- **Статистика достижений** → Агрегированные данные по баллам

### 3. Управление сменами
- **CRUD операции для смен** → Создание, редактирование, удаление смен
- **Список всех смен** → API endpoint для получения смен
- **Детали конкретной смены** → Подробная информация о смене

### 4. Управление мероприятиями (настраиваемая балльная система)
- **Настройка мероприятий** → Создание и конфигурация типов мероприятий
- **Балльная система** → Настройка количества баллов за каждое мероприятие
- **Гибкость** → Возможность добавления новых типов мероприятий

### 5. Система баллов и рейтинга
- **Подсчет баллов** → Автоматический расчет по участию в мероприятиях
- **Рейтинг участников** → Сортировка по общему количеству баллов
- **Статистика по сменам** → Аналитика по отдельным сменам

### 6. Интеграция с Google Sheets
**Реализация:** GoogleSheetsService + двусторонняя синхронизация
- **Синхронизация данных** → Двусторонняя синхронизация с таблицами
- **Автоматическое обновление** → Регулярная синхронизация изменений
- **Обработка конфликтов** → Разрешение конфликтов при изменении данных

### 7. Telegram Mini App интерфейс
**Реализация:** React + Tailwind CSS + Telegram WebApp API
- **Главная страница** → Список участников и их рейтинг
- **Профиль пользователя** → Индивидуальные страницы с подробным профилем
- **Админ-панель** → Управление системой для администраторов
- **Адаптивный дизайн** → Оптимизация для мобильных устройств

---

## Нефункциональные требования

### 1. Производительность
**Реализация:** Оптимизация запросов + кэширование + индексы
- **Быстрый отклик API** → Оптимизированные Prisma запросы + кэширование
- **Page Load ≤ 2 с** → Vite сборка + lazy loading 
- **Оптимизация запросов к БД** → Стратегические индексы + connection pooling

### 2. Масштабируемость
**Реализация:** Модульная архитектура + горизонтальное масштабирование
- **Горизонтальное масштабирование** → Stateless архитектура + load balancing
- **Масштабирование БД** → Connection pooling + оптимизация запросов
- **Расширяемость кода** → Модульная архитектура + API-first design

### 3. Надежность
**Реализация:** Автоматические бэкапы + мониторинг + восстановление
- **Автоматические бэкапы** → pg_dump + scheduled backups
- **Восстановление после сбоев** → План восстановления + мониторинг
- **Отказоустойчивость** → Graceful degradation + error handling

### 4. Безопасность
**Реализация:** Многоуровневая защита + валидация + шифрование
- **Аутентификация через Telegram** → JWT tokens + secure session management
- **Ролевая авторизация** → Middleware для проверки ролей
- **Защита данных** → Шифрование + HTTPS + input validation
- **Rate limiting** → Защита от DDoS атак

### 5. Удобство использования
**Реализация:** UX-first дизайн + Telegram интеграция
- **Telegram Mini App** → Нативная интеграция с Telegram
- **Интуитивный интерфейс** → User-centered design + Tailwind CSS
- **Минимальные действия** → Оптимизированные user flows

### 6. Поддерживаемость
**Реализация:** Чистый код + тестирование + документация
- **Покрытие тестами ≥ 80%** → Jest + Supertest + Playwright
- **Техническая документация** → API docs + архитектурная документация
- **Чистый код** → TypeScript + ESLint + Prettier

---

## Пользовательские роли

### Участник мероприятий (USER)
- **Потребности:** Быстрый доступ к статистике, мотивация к участию
- **Функции:** Просмотр профиля, статистики, рейтинга, смен
- **Реализация:** USER role + ограниченный API доступ

### Организатор мероприятий (ADMIN)  
- **Потребности:** Управление данными, автоматизация процессов
- **Функции:** CRUD операции, управление пользователями, аналитика
- **Реализация:** ADMIN role + полный API доступ

---

## План разработки

### Этап 1: Подготовка и настройка (1 неделя)
- Настройка среды разработки (Docker, PostgreSQL, Node.js)
- Создание базовой архитектуры проекта
- Настройка базы данных и миграций

### Этап 2: Backend разработка (3 недели)
- Реализация core API (User, Shift, Event, Score)
- Система аутентификации через Telegram
- Бизнес-логика и сервисы

### Этап 3: Frontend разработка (3 недели)
- Telegram Mini App интерфейс
- Компоненты для ролей USER и ADMIN
- Интеграция с API

### Этап 4: Интеграции (2 недели)
- Google Sheets API интеграция
- Telegram Bot уведомления
- Синхронизация данных

### Этап 5: Тестирование и оптимизация (2 недели)
- Unit, integration, E2E тестирование
- Оптимизация производительности
- Безопасность и мониторинг

### Этап 6: Развертывание (1 неделя)
- Production развертывание
- Документация


